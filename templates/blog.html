<!-- blog.html -->
<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<script>
			tailwind.config = {
				darkMode: 'class',
			};
		</script>

		<!-- SEO and Social Media Meta Tags -->
		{% set page_title = "Ollayor's Blog - Technical Articles & Insights" %} {% set page_description = "Technical and
		non-technical articles by Ollayor Maxammadnabiyev. Exploring software engineering, programming, mathematics, and
		technology insights." %} {% include 'seo_meta.html' %}

		<link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='favicon.ico') }}" />
		<script src="https://cdn.tailwindcss.com"></script>
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />
		<link
			href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600;700&display=swap"
			rel="stylesheet"
		/>
		<link
			href="https://fonts.googleapis.com/css2?family=Geist+Mono:wght@300;400;500;600;700&display=swap"
			rel="stylesheet"
		/>
		<!-- Enhanced blog styling -->
		<link rel="stylesheet" href="{{ url_for('static', filename='blog-styles.css') }}" />
		{% include 'analytics.html' %}
	</head>

	<body class="font-inter bg-gray-50 dark:bg-gray-900 min-h-screen flex flex-col">
		{% include 'header.html' %}

		<div class="container mx-auto px-4 sm:px-6 lg:px-8 flex-grow py-8">
			<div class="flex flex-col lg:flex-row gap-8">
				<main class="lg:w-2/3">
					{% if articles %}
					<div class="space-y-6">
						{% for article in articles %}
						<a href="{{ url_for('article', slug=article.slug) }}" class="block hover:no-underline">
							<article
								class="bg-white dark:bg-gray-800 rounded-lg shadow-sm hover:shadow-md transition-shadow duration-300 overflow-hidden"
							>
								<div class="p-6">
									<h3
										class="text-2xl font-bold mb-2 text-gray-800 dark:text-gray-200 hover:text-blue-600 transition-colors duration-300"
										style="font-family: 'Geist Mono', monospace"
									>
										{{ article.title }}
									</h3>
									<!-- Enhanced metadata for blog listings -->
									<div class="article-meta text-gray-600 dark:text-gray-400">
										<div class="flex items-center gap-4">
											<div class="meta-item">
												<i class="far fa-calendar-alt mr-2"></i>
												{{ article.date_published.strftime('%d %B, %Y') }}
											</div>
											<div class="meta-item">
												<i class="far fa-clock mr-2"></i>
												{{ article.get_reading_time() }} min read
											</div>
										</div>
									</div>
									<!-- Article summary if available -->
									{% if article.get_summary(200) %}
									<p class="font-mono text-gray-800 dark:text-gray-300 mt-3 text-sm leading-relaxed">
										{{ article.get_summary(200) | safe }}
									</p>
									{% endif %}
								</div>
							</article>
						</a>
						{% endfor %}
					</div>
					
					<!-- Pagination Controls -->
					{% if total_pages > 1 %}
					<div class="mt-8 flex justify-center">
						<nav class="flex items-center space-x-2">
							<!-- Previous Page Button -->
							{% if has_prev %}
							<a 
								href="{{ url_for('blog', page=prev_page) }}" 
								class="px-3 py-2 text-sm font-medium text-gray-500 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-700 dark:hover:text-gray-300 transition-colors"
							>
								<i class="fas fa-chevron-left mr-1"></i>
								Previous
							</a>
							{% else %}
							<span class="px-3 py-2 text-sm font-medium text-gray-300 dark:text-gray-600 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md cursor-not-allowed">
								<i class="fas fa-chevron-left mr-1"></i>
								Previous
							</span>
							{% endif %}
							
							<!-- Page Numbers -->
							{% for page_num in range(1, total_pages + 1) %}
								{% if page_num == page %}
								<span class="px-3 py-2 text-sm font-medium text-white bg-blue-600 border border-blue-600 rounded-md">
									{{ page_num }}
								</span>
								{% elif page_num <= 2 or page_num >= total_pages - 1 or (page_num >= page - 1 and page_num <= page + 1) %}
								<a 
									href="{{ url_for('blog', page=page_num) }}" 
									class="px-3 py-2 text-sm font-medium text-gray-500 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-700 dark:hover:text-gray-300 transition-colors"
								>
									{{ page_num }}
								</a>
								{% elif page_num == 3 and page > 4 %}
								<span class="px-3 py-2 text-sm font-medium text-gray-500">...</span>
								{% elif page_num == total_pages - 2 and page < total_pages - 3 %}
								<span class="px-3 py-2 text-sm font-medium text-gray-500">...</span>
								{% endif %}
							{% endfor %}
							
							<!-- Next Page Button -->
							{% if has_next %}
							<a 
								href="{{ url_for('blog', page=next_page) }}" 
								class="px-3 py-2 text-sm font-medium text-gray-500 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-700 dark:hover:text-gray-300 transition-colors"
							>
								Next
								<i class="fas fa-chevron-right ml-1"></i>
							</a>
							{% else %}
							<span class="px-3 py-2 text-sm font-medium text-gray-300 dark:text-gray-600 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md cursor-not-allowed">
								Next
								<i class="fas fa-chevron-right ml-1"></i>
							</span>
							{% endif %}
						</nav>
					</div>
					
					<!-- Pagination Info -->
					<div class="mt-4 text-center text-sm text-gray-600 dark:text-gray-400" style="font-family: 'JetBrains Mono', monospace">
						Showing {{ ((page - 1) * 12) + 1 }} to {{ ((page - 1) * 12) + articles|length }} of {{ total_articles }} articles
					</div>
					{% endif %}
					{% else %}
					<div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 text-center">
						<p class="text-gray-600 dark:text-gray-400" style="font-family: 'JetBrains Mono', monospace">
							There are no articles yet.
						</p>
					</div>
					{% endif %}
				</main>

				<aside class="lg:w-1/3">
					<div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 sticky top-24">
						<h2
							class="text-2xl font-bold text-gray-800 dark:text-gray-200 mb-4"
							style="font-family: 'Geist Mono', monospace"
						>
							Obuna Bo'ling
						</h2>
						<p
							class="text-gray-600 dark:text-gray-400 leading-relaxed"
							style="font-family: 'JetBrains Mono', monospace"
						>
							Yangi maqola va maruza
							<a
								href="https://t.me/Qprogrammer"
								class="text-blue-500 hover:text-blue-700 transition-colors duration-300 inline-flex items-center"
							>
								<i class="fab fa-telegram-plane mr-1"></i>
								@Qprogrammer
							</a>
							telegram kanalimda topishingiz mumkin.
						</p>
					</div>
				</aside>
			</div>
		</div>

		{% include 'footer.html' %}
	</body>
</html>
