<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />

		<!-- SEO and Social Media Meta Tags -->
		{% set page_title = "Ollayor Maxammadnabiyev - Software Engineer & Python Developer | ollayor.uz" %} {% set
		page_description = "Ollayor Maxammadnabiyev is a Software Engineer from Uzbekistan specializing in
		Javascript/Typescript, Node.js, ExpressJS, NestJS, Python, Flask, FastAPI, web development, and building innovative
		solutions. View projects and blog at ollayor.uz" %} {% include 'seo_meta.html' %}

		<!-- Enhanced Person Schema for AI and Search Engines -->
		{% include 'person_schema.html' %}

		<!-- Preconnect to external domains for better performance -->
		<link rel="preconnect" href="https://cdn.tailwindcss.com" crossorigin />
		<link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin />
		<link rel="preconnect" href="https://fonts.googleapis.com" crossorigin />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />

		<!-- DNS Prefetch for additional resources -->
		<link rel="dns-prefetch" href="https://cdn.tailwindcss.com" />
		<link rel="dns-prefetch" href="https://cdnjs.cloudflare.com" />

		<!-- Favicon with multiple formats and cache busting -->
		<link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='favicon-32x32.png') }}" />
		<link rel="icon" type="image/png" sizes="16x16" href="{{ url_for('static', filename='favicon-16x16.png') }}" />
		<link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='favicon-optimized.ico') }}" />
		<link rel="shortcut icon" type="image/x-icon" href="{{ url_for('static', filename='favicon-optimized.ico') }}" />
		<link rel="apple-touch-icon" sizes="180x180" href="{{ url_for('static', filename='favicon-256x256.png') }}" />

		<!-- Preload critical CSS -->
		<link rel="preload" href="https://cdn.tailwindcss.com" as="script" />
		<script src="https://cdn.tailwindcss.com"></script>

		<!-- Non-blocking Font Awesome -->
		<link
			rel="preload"
			href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
			as="style"
			onload="this.onload=null;this.rel='stylesheet'"
		/>
		<noscript
			><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
		/></noscript>

		<!-- Non-blocking fonts with display=swap -->
		<link
			href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600;700&display=swap"
			rel="stylesheet"
			media="print"
			onload="this.media='all'"
		/>
		<link
			href="https://fonts.googleapis.com/css2?family=Geist+Mono:wght@300;400;500;600;700&display=swap"
			rel="stylesheet"
			media="print"
			onload="this.media='all'"
		/>
		{% include 'analytics.html' %}
	</head>

	<body
		class="font-mono bg-white dark:bg-black text-gray-900 dark:text-gray-100 min-h-screen flex items-start lg:items-center justify-center p-6 overflow-y-auto lg:overflow-hidden relative"
	>
		<!-- Background Gradients for Blur Effect -->
		<div class="fixed inset-0 -z-10 overflow-hidden pointer-events-none">
			<div
				class="absolute top-[-10%] left-[-10%] w-[50%] h-[50%] rounded-full bg-purple-500/5 dark:bg-purple-500/10 blur-[120px]"
			></div>
			<div
				class="absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] rounded-full bg-blue-500/5 dark:bg-blue-500/10 blur-[120px]"
			></div>
		</div>

		<main class="w-full max-w-6xl grid grid-cols-1 lg:grid-cols-2 gap-12 lg:gap-24 items-center relative z-10">
			<!-- Left Column: Intro -->
			<div class="space-y-8 flex flex-col items-center">
				<div class="space-y-4">
					<div class="flex items-center space-x-1">
						<span class="text-2xl">ðŸ‘‹</span>
						<h1 class="text-3xl font-bold tracking-tight">hey! i'm ollayor</h1>
					</div>
					<p class="text-sm text-gray-600 dark:text-gray-400 leading-relaxed">
						i'm a software developer & full-time breaker.
					</p>
					<p class="text-sm text-gray-600 dark:text-gray-400 leading-relaxed">
						I break things, fix them, then break them better.
					</p>
				</div>

				<!-- Social Links -->
				<div class="space-x-4" itemscope itemtype="https://schema.org/Person">
					<a
						href="https://github.com/olllayor"
						target="_blank"
						rel="me noopener"
						class="text-gray-500 hover:text-gray-900 dark:hover:text-gray-100 transition-colors"
						title="Ollayor's GitHub Profile"
						itemprop="sameAs"
					>
						<i class="fab fa-github text-2xl"></i>
						<span class="sr-only">GitHub - olllayor</span>
					</a>
					<a
						href="https://twitter.com/olllayor"
						target="_blank"
						rel="me noopener"
						class="text-gray-500 hover:text-gray-900 dark:hover:text-gray-100 transition-colors"
						title="Ollayor's Twitter Profile"
						itemprop="sameAs"
					>
						<i class="fab fa-twitter text-2xl"></i>
						<span class="sr-only">Twitter - @olllayor</span>
					</a>
					<a
						href="https://t.me/Qprogrammer"
						target="_blank"
						rel="me noopener"
						class="text-gray-500 hover:text-gray-900 dark:hover:text-gray-100 transition-colors"
						title="Ollayor's Telegram Channel"
						itemprop="sameAs"
					>
						<i class="fab fa-telegram text-2xl"></i>
						<span class="sr-only">Telegram - @Qprogrammer</span>
					</a>
					<a
						href="https://www.linkedin.com/in/olllayor/"
						target="_blank"
						rel="me noopener"
						class="text-gray-500 hover:text-gray-900 dark:hover:text-gray-100 transition-colors"
						title="Ollayor's LinkedIn Profile"
						itemprop="sameAs"
					>
						<i class="fab fa-linkedin text-2xl"></i>
						<span class="sr-only">LinkedIn - Ollayor Maxammadnabiyev</span>
					</a>
					<a
						href="/matrix"
						class="text-gray-500 hover:text-gray-900 dark:hover:text-gray-100 transition-colors"
						title="Terminal Matrix"
					>
						<i class="fas fa-terminal text-2xl"></i>
						<span class="sr-only">Terminal</span>
					</a>
					<a
						href="{{ url_for('static', filename='media/Olloyor_s_resume.pdf') }}"
						target="_blank"
						class="text-gray-500 hover:text-gray-900 dark:hover:text-gray-100 transition-colors"
						title="Download Ollayor's CV / Resume"
					>
						<i class="fa-solid fa-newspaper text-2xl"></i>
						<span class="sr-only">CV / Resume</span>
					</a>
				</div>

				<!-- Blog Link -->
				<div class="pt-4">
					<a
						href="/blog"
						class="inline-flex items-center gap-3 px-5 py-2.5 rounded-full bg-gray-50/50 dark:bg-white/5 border border-gray-200/50 dark:border-white/10 hover:border-gray-300 dark:hover:border-white/20 hover:bg-gray-100/50 dark:hover:bg-white/10 transition-all group backdrop-blur-sm"
					>
						<span class="relative flex h-2 w-2">
							<span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span>
							<span class="relative inline-flex rounded-full h-2 w-2 bg-green-500"></span>
						</span>
						<div class="flex flex-col items-start text-left leading-tight">
							<span
								class="text-xs font-medium text-gray-900 dark:text-gray-100 group-hover:underline decoration-gray-400/50 underline-offset-2"
								>Read my thoughts</span
							>
							<span class="text-[10px] text-gray-500 dark:text-gray-400"
								>{{ all_time_readers }} users read our blog</span
							>
						</div>
						<i
							class="fas fa-arrow-right text-xs text-gray-400 group-hover:text-gray-600 dark:group-hover:text-gray-300 transition-transform group-hover:translate-x-0.5 ml-1"
						></i>
					</a>
				</div>
			</div>

			<!-- Right Column: Projects -->
			<div class="space-y-4">
				<!-- Projects Grid -->
				<div class="grid grid-cols-1 sm:grid-cols-2 gap-3" id="projects-grid">
					{% for project in projects %}
					<div
						class="project-card group p-4 rounded-lg border border-gray-200/20 dark:border-gray-800/50 bg-black/5 dark:bg-black/50 backdrop-blur-xl hover:bg-black/10 dark:hover:bg-black/60 transition-all shadow-sm hover:shadow-md cursor-pointer"
						data-technologies="{{ project.technologies|join(',') }}"
						data-title="{{ project.title }}"
						data-description="{{ project.description }}"
						data-image="{{ project.image_url or '' }}"
						data-github="{{ project.github_link or '' }}"
						data-demo="{{ project.live_demo_link or '' }}"
						onclick="openProjectModal(this)"
					>
						<div class="flex items-start justify-between mb-2">
							<div class="flex items-center space-x-2">
								{% if project.image_url %}
								<img src="{{ project.image_url }}" alt="{{ project.title }}" class="w-6 h-6 object-cover rounded" />
								{% else %}
								<div class="p-1.5 bg-white dark:bg-gray-900 rounded-md border border-gray-200 dark:border-gray-700">
									<i class="fas fa-code text-gray-500 text-xs"></i>
								</div>
								{% endif %}
								<h3 class="font-bold text-sm">{{ project.title }}</h3>
							</div>
							<div class="flex items-center gap-2">
								{% if project.github_link %}
								<a
									href="{{ project.github_link }}"
									target="_blank"
									class="text-gray-500 hover:text-gray-900 dark:hover:text-gray-100 transition-colors"
									title="View on GitHub"
								>
									<i class="fab fa-github text-xs"></i>
								</a>
								{% endif %} {% if project.live_demo_link %}
								<a
									href="{{ project.live_demo_link }}"
									target="_blank"
									class="text-gray-500 hover:text-gray-900 dark:hover:text-gray-100 transition-colors"
									title="Live Demo"
								>
									<i class="fas fa-external-link-alt text-xs"></i>
								</a>
								{% endif %}
							</div>
						</div>
						<p class="text-xs text-gray-600 dark:text-gray-400 leading-relaxed line-clamp-2 mb-3">
							{{ project.description }}
						</p>

						{% if project.technologies %}
						<div class="flex flex-wrap gap-1.5 mt-auto">
							{% for tech in project.technologies[:3] %}
							<span
								class="tech-badge text-[10px] font-medium px-2 py-0.5 rounded-full bg-gray-100 dark:bg-white/10 text-gray-600 dark:text-gray-300 border border-gray-200/50 dark:border-white/5"
							>
								{{ tech }}
							</span>
							{% endfor %} {% if project.technologies|length > 3 %}
							<span
								class="text-[10px] font-medium px-2 py-0.5 text-gray-400 dark:text-gray-500 cursor-default"
								title="{{ project.technologies[3:]|join(', ') }}"
							>
								+{{ project.technologies|length - 3 }} more
							</span>
							{% endif %}
						</div>
						{% endif %}
					</div>
					{% else %}
					<div class="col-span-2 p-6 text-center text-gray-500">
						<p>No projects found.</p>
					</div>
					{% endfor %}
				</div>

				<!-- View All Projects Link -->
				<div class="text-center pt-4">
					<a
						href="/projects"
						class="inline-flex items-center gap-2 text-xs text-gray-500 hover:text-gray-900 dark:hover:text-gray-100 transition-colors group"
					>
						<span>View all projects</span>
						<i class="fas fa-arrow-right text-[10px] group-hover:translate-x-1 transition-transform"></i>
					</a>
				</div>
			</div>
		</main>

		<style>
			/* Custom Scrollbar for Projects */
			.custom-scrollbar::-webkit-scrollbar {
				width: 4px;
			}
			.custom-scrollbar::-webkit-scrollbar-track {
				background: transparent;
			}
			.custom-scrollbar::-webkit-scrollbar-thumb {
				background-color: rgba(156, 163, 175, 0.5);
				border-radius: 20px;
			}
			.dark .custom-scrollbar::-webkit-scrollbar-thumb {
				background-color: rgba(75, 85, 99, 0.5);
			}

			/* Filter button states */
			.filter-btn.active {
				background-color: #111827;
				color: white;
				border-color: #111827;
			}
			.dark .filter-btn.active {
				background-color: white;
				color: #111827;
				border-color: white;
			}

			/* Project card hidden state */
			.project-card.hidden {
				display: none;
			}
		</style>

		<!-- Project Quick View Modal -->
		<div
			id="projectModal"
			class="fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4 opacity-0 pointer-events-none transition-all duration-300"
			onclick="closeProjectModal(event)"
		>
			<div
				class="relative bg-white dark:bg-gray-900 rounded-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto shadow-2xl"
				onclick="event.stopPropagation()"
			>
				<!-- Modal Header with Image -->
				<div
					id="modalImageContainer"
					class="relative aspect-video bg-gray-100 dark:bg-gray-800 rounded-t-2xl overflow-hidden hidden"
				>
					<img id="modalImage" src="" alt="" class="w-full h-full object-cover" />
				</div>

				<!-- Modal Content -->
				<div class="p-6">
					<div class="flex justify-between items-start mb-4">
						<h3 id="modalTitle" class="text-xl font-bold text-gray-900 dark:text-gray-100"></h3>
						<button
							onclick="closeProjectModal(event)"
							class="text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors p-1"
						>
							<i class="fas fa-times text-lg"></i>
						</button>
					</div>

					<p id="modalDescription" class="text-sm text-gray-600 dark:text-gray-400 leading-relaxed mb-4"></p>

					<!-- Technologies -->
					<div id="modalTechnologies" class="flex flex-wrap gap-2 mb-6"></div>

					<!-- Action Buttons -->
					<div class="flex gap-3" id="modalActions">
						<a
							id="modalGithub"
							href="#"
							target="_blank"
							class="flex-1 items-center justify-center gap-2 px-4 py-2.5 rounded-lg bg-gray-900 dark:bg-white text-white dark:text-gray-900 font-medium text-sm hover:bg-gray-800 dark:hover:bg-gray-100 transition-colors"
							style="display: none"
						>
							<i class="fab fa-github"></i>
							<span>View Code</span>
						</a>
						<a
							id="modalDemo"
							href="#"
							target="_blank"
							class="flex-1 items-center justify-center gap-2 px-4 py-2.5 rounded-lg border border-gray-200 dark:border-gray-700 text-gray-900 dark:text-gray-100 font-medium text-sm hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors"
							style="display: none"
						>
							<i class="fas fa-external-link-alt"></i>
							<span>Live Demo</span>
						</a>
					</div>
				</div>
			</div>
		</div>

		<script>
			// Debounce helper for better INP
			function debounce(fn, delay) {
				let timer;
				return function(...args) {
					clearTimeout(timer);
					timer = setTimeout(() => fn.apply(this, args), delay);
				};
			}
				// Project Modal Functions
				function openProjectModal(card) {
					const modal = document.getElementById('projectModal');
					const title = card.dataset.title;
					const description = card.dataset.description;
					const image = card.dataset.image;
					const github = card.dataset.github;
					const demo = card.dataset.demo;
					const technologies = card.dataset.technologies ? card.dataset.technologies.split(',') : [];

					// Populate modal
					document.getElementById('modalTitle').textContent = title;
					document.getElementById('modalDescription').textContent = description;

					// Image
					const imageContainer = document.getElementById('modalImageContainer');
					const modalImage = document.getElementById('modalImage');
					if (image) {
						modalImage.src = image;
						modalImage.alt = title;
						imageContainer.classList.remove('hidden');
					} else {
						imageContainer.classList.add('hidden');
					}

					// Technologies
					const techContainer = document.getElementById('modalTechnologies');
					techContainer.innerHTML = technologies
						.map(
							(tech) =>
								`<span class="text-xs font-medium px-3 py-1 rounded-full bg-gray-100 dark:bg-white/10 text-gray-600 dark:text-gray-300 border border-gray-200 dark:border-white/10">${tech.trim()}</span>`,
						)
						.join('');

					// Links
					const githubBtn = document.getElementById('modalGithub');
					const demoBtn = document.getElementById('modalDemo');

					if (github) {
						githubBtn.href = github;
						githubBtn.style.display = 'inline-flex';
					} else {
						githubBtn.style.display = 'none';
					}

					if (demo) {
						demoBtn.href = demo;
						demoBtn.style.display = 'inline-flex';
					} else {
						demoBtn.style.display = 'none';
					}

					// Show modal
					modal.classList.remove('opacity-0', 'pointer-events-none');
					modal.classList.add('opacity-100');
					document.body.style.overflow = 'hidden';
				}

				function closeProjectModal(event) {
					if (event) event.stopPropagation();
					const modal = document.getElementById('projectModal');
					modal.classList.remove('opacity-100');
					modal.classList.add('opacity-0', 'pointer-events-none');
					document.body.style.overflow = 'auto';
				}

				// Technology Filter Functions - Debounced for better INP
				const filterProjects = debounce(function(tech) {
					document.querySelectorAll('.project-card').forEach((card) => {
						const cardTechs = card.dataset.technologies.toLowerCase();
						if (tech === 'all' || cardTechs.includes(tech.toLowerCase())) {
							card.classList.remove('hidden');
						} else {
							card.classList.add('hidden');
						}
					});
				}, 50);

				document.querySelectorAll('.filter-btn').forEach((btn) => {
					btn.addEventListener('click', function () {
						const tech = this.dataset.tech;

						// Update active state
						document.querySelectorAll('.filter-btn').forEach((b) => {
							b.classList.remove('active');
							b.classList.remove(
								'bg-gray-900',
								'dark:bg-white',
								'text-white',
								'dark:text-gray-900',
								'border-gray-900',
								'dark:border-white',
							);
							b.classList.add(
								'bg-transparent',
								'text-gray-600',
								'dark:text-gray-400',
								'border-gray-200',
								'dark:border-gray-700',
							);
						});
						this.classList.add('active');
						this.classList.remove(
							'bg-transparent',
							'text-gray-600',
							'dark:text-gray-400',
							'border-gray-200',
							'dark:border-gray-700',
						);
						this.classList.add(
							'bg-gray-900',
							'dark:bg-white',
							'text-white',
							'dark:text-gray-900',
							'border-gray-900',
							'dark:border-white',
						);

						// Filter projects with debounce
						filterProjects(tech);
							}
						});
					});
				});

				// Keyboard support - Use passive listener
				document.addEventListener('keydown', function (event) {
					if (event.key === 'Escape') {
						closeProjectModal(event);
					}
				}, { passive: true });
		</script>
	</body>
</html>
