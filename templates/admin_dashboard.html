<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Admin Dashboard - Ollayor's Blog</title>
		<link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='favicon.ico') }}" />
		<script src="https://cdn.tailwindcss.com"></script>
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
		<link
			href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600;700&display=swap"
			rel="stylesheet"
		/>
		<link
			href="https://fonts.googleapis.com/css2?family=Geist+Mono:wght@300;400;500;600;700&display=swap"
			rel="stylesheet"
		/>
		<link rel="stylesheet" href="{{ url_for('static', filename='blog-styles.css') }}" />
		{% include 'analytics.html' %}
	</head>
	<body class="font-inter bg-gray-50 dark:bg-gray-900 min-h-screen flex flex-col">
		{% include 'header.html' %}

		<main class="flex-grow container mx-auto px-4 sm:px-6 lg:px-8 py-12 pt-20">
			<h1 class="text-3xl font-bold text-gray-800 dark:text-gray-100 mb-8" style="font-family: 'Geist Mono', monospace">
				Admin Dashboard
			</h1>

			<!-- Stats Cards -->
			<section class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-10">
				<div class="bg-white dark:bg-gray-800 rounded-xl shadow p-6">
					<div class="flex items-center justify-between">
						<div>
							<p class="text-sm text-gray-600 dark:text-gray-300">Total Articles</p>
							<p class="text-3xl font-bold text-gray-900 dark:text-gray-100">{{ articles_count }}</p>
						</div>
						<i class="fas fa-file-lines text-blue-500 text-2xl"></i>
					</div>
				</div>
				<div class="bg-white dark:bg-gray-800 rounded-xl shadow p-6">
					<div class="flex items-center justify-between">
						<div>
							<p class="text-sm text-gray-600 dark:text-gray-300">Published</p>
							<p class="text-3xl font-bold text-gray-900 dark:text-gray-100">{{ published_count }}</p>
						</div>
						<i class="fas fa-check-circle text-green-500 text-2xl"></i>
					</div>
				</div>
				<div class="bg-white dark:bg-gray-800 rounded-xl shadow p-6">
					<div class="flex items-center justify-between">
						<div>
							<p class="text-sm text-gray-600 dark:text-gray-300">Drafts</p>
							<p class="text-3xl font-bold text-gray-900 dark:text-gray-100">{{ drafts_count }}</p>
						</div>
						<i class="fas fa-pencil text-amber-500 text-2xl"></i>
					</div>
				</div>
				<div class="bg-white dark:bg-gray-800 rounded-xl shadow p-6">
					<div class="flex items-center justify-between">
						<div>
							<p class="text-sm text-gray-600 dark:text-gray-300">Projects</p>
							<p class="text-3xl font-bold text-gray-900 dark:text-gray-100">{{ projects_count }}</p>
						</div>
						<i class="fas fa-diagram-project text-purple-500 text-2xl"></i>
					</div>
				</div>
			</section>

			<!-- Quick Actions -->
			<section class="bg-white dark:bg-gray-800 rounded-xl shadow p-6 mb-10">
				<h2
					class="text-xl font-semibold text-gray-800 dark:text-gray-100 mb-4"
					style="font-family: 'Geist Mono', monospace"
				>
					Quick Actions
				</h2>
				<div class="flex flex-wrap gap-4">
					<a href="{{ url_for('publish') }}" class="liquid-glass-btn liquid-glass-btn--primary"
						><i class="fas fa-plus"></i><span>New Article</span></a
					>
					<a href="{{ url_for('admin_projects') }}" class="liquid-glass-btn"
						><i class="fas fa-layer-group"></i><span>Manage Projects</span></a
					>
					<a href="{{ url_for('blog') }}" class="liquid-glass-btn"><i class="fas fa-list"></i><span>View Blog</span></a>
					<a
						href="{{ url_for('clear_cache') }}"
						class="liquid-glass-btn liquid-glass-btn--danger"
						onclick="return confirm('Clear all caches?')"
						><i class="fas fa-broom"></i><span>Clear Cache</span></a
					>
				</div>
			</section>

			<!-- Recent Articles -->
			<section class="bg-white dark:bg-gray-800 rounded-xl shadow">
				<div class="p-6 border-b border-gray-200 dark:border-gray-700">
					<h2
						class="text-xl font-semibold text-gray-800 dark:text-gray-100"
						style="font-family: 'Geist Mono', monospace"
					>
						Recent Articles
					</h2>
				</div>
				<div class="overflow-x-auto">
					<table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
						<thead class="bg-gray-50 dark:bg-gray-700">
							<tr>
								<th
									class="px-6 py-3 text-left text-xs font-medium text-gray-700 dark:text-gray-100 uppercase tracking-wider"
								>
									Title
								</th>
								<th
									class="px-6 py-3 text-left text-xs font-medium text-gray-700 dark:text-gray-100 uppercase tracking-wider"
								>
									Status
								</th>
								<th
									class="px-6 py-3 text-left text-xs font-medium text-gray-700 dark:text-gray-100 uppercase tracking-wider"
								>
									Updated
								</th>
								<th class="px-6 py-3"></th>
							</tr>
						</thead>
						<tbody class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
							{% for a in recent_articles %}
							<tr>
								<td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-gray-100">
									{{ a.title }}
								</td>
								<td class="px-6 py-4 whitespace-nowrap text-sm">
									{% if a.is_published %}
									<span
										class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"
										>Published</span
									>
									{% else %}
									<span
										class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-amber-100 text-amber-800 dark:bg-amber-900 dark:text-amber-200"
										>Draft</span
									>
									{% endif %}
								</td>
								<td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700 dark:text-gray-200">
									{% set dt = a.date_updated or a.date_published %} {{ dt.strftime('%Y-%m-%d %H:%M') if dt else 'â€”' }}
								</td>
								<td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-3">
									<a
										href="{{ url_for('article', slug=a.slug) }}"
										class="text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300"
										>View</a
									>
									<a
										href="{{ url_for('edit_article', slug=a.slug) }}"
										class="text-gray-700 hover:text-gray-900 dark:text-gray-100 dark:hover:text-gray-50"
										>Edit</a
									>
									<a
										href="{{ url_for('delete_article', slug=a.slug) }}"
										onclick="return confirm('Delete this article?')"
										class="text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300"
										>Delete</a
									>
								</td>
							</tr>
							{% else %}
							<tr>
								<td colspan="4" class="px-6 py-8 text-center text-gray-700 dark:text-gray-200">No recent articles.</td>
							</tr>
							{% endfor %}
						</tbody>
					</table>
				</div>
			</section>
		</main>

		{% include 'footer.html' %}
	</body>
</html>
